const dnes = new Date();
dnes.setHours(0,0,0,0); // ignorujeme čas

const parseDatum = (datum) => {
  const [d, m, r] = datum.split(".").map(Number);
  return new Date(r, m - 1, d);
};

// filtrovanie a zoradenie
const filtrData = data
  .map(item => ({...item, _datumObj: parseDatum(item.datum)}))
  .filter(item => item._datumObj >= dnes) // od dnešného dňa vrátane
  .sort((a, b) => a._datumObj - b._datumObj); // zoradíme od najbližšieho

function renderData(list) {
  if (!list.length) {
    contentDiv.innerHTML = "<p>Žiadne nadchádzajúce služby.</p>";
    return;
  }

  contentDiv.innerHTML = list.map(item => `
    <h2>${item.datum} (${item.den})</h2>

    <table>
      <tr><th colspan="2">${item.podujatie}</th></tr>
      ${Object.entries(item.sluzby)
        .map(([k, v]) => `<tr><td>${k}</td><td>${v}</td></tr>`)
        .join("")}
    </table>

    <table>
      <tr><th colspan="2">Nedeľa – ${item.nedela.datum}</th></tr>
      ${Object.entries(item.nedela)
        .filter(([k]) => k !== "datum")
        .map(([k, v]) => `<tr><td>${k}</td><td>${v}</td></tr>`)
        .join("")}
    </table>
  `).join("");
}

