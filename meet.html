<script>
  // ğŸ” Overenie prÃ­stupu
  if (sessionStorage.getItem("accessGranted") !== "true") {
    window.location.replace("login.html");
  }
</script>

<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SchÃ´dzky â€“ SNVâ€‘Stred</title>
  <style>
    * { margin:0; padding:0; boxâ€‘sizing:borderâ€‘box; }
    body, html {
      height:100%; width:100%;
      font-family:"Segoe UI", Arial, sansâ€‘serif;
      color:white;
      background:url('img/background.jpg') center/cover noâ€‘repeat fixed;
      overflowâ€‘x:hidden;
    }
    video.background {
      position:fixed; right:0; bottom:0;
      minâ€‘width:100%; minâ€‘height:100%;
      width:auto; height:auto;
      zâ€‘index:-1;
      filter:brightness(0.6);
      objectâ€‘fit:cover;
      background:url('img/background.jpg') center/cover noâ€‘repeat;
    }
    nav {
      position:fixed; top:0; width:100%;
      background:rgba(0,0,0,0.45);
      display:flex; justifyâ€‘content:center; flexâ€‘wrap:wrap;
      gap:15px; padding:12px 10px; zâ€‘index:10;
      backdropâ€‘filter:blur(6px);
    }
    nav a {
      color:#fff; textâ€‘decoration:none;
      fontâ€‘weight:bold; letterâ€‘spacing:0.5px;
      transition:0.3s; padding:6px 10px; borderâ€‘radius:5px;
      fontâ€‘size:1em;
    }
    nav a:not(:lastâ€‘child)::after {
      content:"|"; color:#bbb; marginâ€‘left:10px;
    }
    nav a:hover { background:rgba(255,255,255,0.2); }
    .overlay {
      position:relative; minâ€‘height:100%; width:100%;
      display:flex; flexâ€‘direction:column; alignâ€‘items:center;
      padding:100px 20px 60px;
      background:rgba(0,0,0,0.35);
      textâ€‘align:center;
    }
    h2 {
      fontâ€‘size:2em; marginâ€‘bottom:20px;
      textâ€‘shadow:1px 1px 8px rgba(0,0,0,0.6);
    }
    table {
      width:90%; maxâ€‘width:900px; margin:auto;
      borderâ€‘collapse:collapse;
      background:rgba(255,255,255,0.12); backdropâ€‘filter:blur(5px);
      borderâ€‘radius:12px; overflow:hidden;
      color:#fff; boxâ€‘shadow:0 3px 10px rgba(0,0,0,0.3);
    }
    th, td {
      padding:12px 10px; textâ€‘align:center;
      borderâ€‘bottom:1px solid rgba(255,255,255,0.2);
    }
    th {
      background:rgba(37,99,235,0.6);
      fontâ€‘weight:bold;
    }
    tr:nthâ€‘child(even) {
      background:rgba(255,255,255,0.08);
    }
    footer {
      position:fixed; bottom:0; width:100%;
      textâ€‘align:center; fontâ€‘size:0.9em; color:#ddd;
      background:rgba(0,0,0,0.3); padding:8px 0;
    }
    @media(maxâ€‘width:768px) {
      h2 { fontâ€‘size:1.5em; }
      th, td { padding:10px; }
    }
    @media(maxâ€‘width:480px) {
      h2 { fontâ€‘size:1.2em; }
      table { fontâ€‘size:0.9em; }
    }
  </style>
</head>
<body>

  <video autoplay muted loop playsinline class="background" ariaâ€‘hidden="true">
    <source src="video/video.mp4" type="video/mp4">
    VÃ¡Å¡ prehliadaÄ nepodporuje prehrÃ¡vanie videa.
  </video>

  <nav>
    <a href="index.html">Domov</a>
    <a href="zas.html">Å½ivot a sluÅ¾ba</a>
    <a href="study.html">Å tÃºdium SV</a>
    <a href="service.html">SluÅ¾by</a>
    <a href="meet.html"><strong>SchÃ´dzky</strong></a>
    <a href="groups.html">Skupiny</a>
  </nav>

  <div class="overlay">
    <h2>ğŸ“… SchÃ´dzky â€“ SpiÅ¡skÃ¡ NovÃ¡ Ves â€“ stred</h2>
    <table id="meetingsTable">
      <thead>
        <tr>
          <th>DÃ¡tum</th>
          <th>DeÅˆ</th>
          <th>ÄŒas</th>
          <th>SluÅ¾obnÃ¡ skupina</th>
          <th>Miesto</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <footer>Â© 2025 Zbor SNVâ€‘Stred | InternÃ© pouÅ¾itie</footer>

  <script>
    const sheetCSV = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTa7fvH3mSGOlAXkmuX0MMNZc1_JZqWclGsmgYQHgAEhQoblhbjjEje557zdJhuQIVCp5kSgq8FtPIr/pub?gid=0&single=true&output=csv";

    fetch(sheetCSV)
      .then(res => res.text())
      .then(csvText => {
        const rows = csvText.split("\n").map(r => r.split(","));
        const today = new Date();
        const tbody = document.querySelector("#meetingsTable tbody");
        tbody.innerHTML = "";

        rows.forEach((row,i) => {
          if (i === 0) return; // preskoÄiÅ¥ hlaviÄku
          const [dateStr, day, time, group, place] = row;
          const dateObj = new Date(dateStr);
          if (dateObj >= new Date(today.toDateString())) {
            const tr = document.createElement("tr");
            tr.innerHTML = `<td>${dateStr}</td><td>${day}</td><td>${time}</td><td>${group}</td><td>${place}</td>`;
            tbody.appendChild(tr);
          }
        });
      })
      .catch(err => {
        console.error(err);
        document.querySelector("#meetingsTable tbody").innerHTML = `<tr><td colspan="5">âš ï¸ Chyba pri naÄÃ­tanÃ­ dÃ¡t</td></tr>`;
      });
  </script>

</body>
</html>
